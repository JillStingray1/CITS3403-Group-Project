{# templates/analysis.html #}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stats</title>

  <!-- Shared task-bar / navbar styles -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='stylesheet/common.css') }}"
  />
  <!-- Page-specific styles -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='stylesheet/analysis.css') }}"
  />

  <!-- Chart.js for the bar chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

  {# expose the current meeting_id to the page JS #}
  <script type="text/javascript">
    // available to analysis.js as a global
    const MEETING_ID = "{{ meeting.id }}";
  </script>

  <!-- Page logic -->
  <script
    src="{{ url_for('static', filename='javascript/analysis.js') }}"
    defer
  ></script>
</head>
<body id="analysis" data-meeting-id="{{ meeting.id }}">
  <!-- ─── Navbar / Task Bar ─────────────────────────────────────────── -->
  <header class="navbar">
    <div class="nav-container">
      <!-- Logo on the left -->
      <a href="{{ url_for('index') }}" class="logo-link">
        <img
          src="{{ url_for('static', filename='media/app-logo.png') }}"
          alt="App Logo"
          class="logo-nav"
        />
      </a>

      <!-- Back button on the right -->
      <div class="nav-buttons">
        <a
          href="{{ url_for('main_menu') }}"
          class="btn btn-primary"
          role="button"
        >
          ← Back to Main Menu
        </a>
      </div>
    </div>
  </header>

  <!-- ─── Page Content ──────────────────────────────────────────────── -->
  <main class="analysis-wrapper">
    <h1 class="page-title">Stats</h1>

    <div class="stats-controls">
      <label for="week-selector">Week of</label>
      <select id="week-selector" class="week-dropdown">
        {% for week in upcoming_weeks %}
          <option value="{{ week.isoformat() }}">
            {{ week.strftime('%d %B %Y') }}
          </option>
        {% endfor %}
      </select>
    </div>

    <section class="card popular-times-card">
      <h2>Most Popular Free Times</h2>

      <div class="stats-headers">
        <div class="col-slot">Time Slot</div>
        <div class="col-users">Users</div>
      </div>

      <div class="chart-wrapper">
        <canvas id="popular-times-chart"></canvas>
      </div>
    </section>
  </main>
</body>
</html>
